<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unityå­˜å‚¨ç³»ç»Ÿè®¾è®¡ä¸å®ç° - Tech Blog</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <style>
        /* Article specific styles */
        .article-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 100px 0 80px;
            position: relative;
            overflow: hidden;
        }

        .article-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="50" r="0.5" fill="white" opacity="0.05"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.1;
        }

        .article-title {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .article-meta {
            display: flex;
            gap: 2rem;
            align-items: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            position: relative;
            z-index: 1;
        }

        .article-meta span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .article-content {
            padding: 80px 0;
            background: var(--background-color);
        }

        .article-layout {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 3rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .article-body {
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .article-sidebar {
            position: sticky;
            top: 120px;
            height: fit-content;
        }

        .article-body h2 {
            font-size: 2rem;
            font-weight: 600;
            margin: 2rem 0 1rem;
            color: var(--text-primary);
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .article-body h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 1.5rem 0 1rem;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1.5rem;
            color: var(--text-secondary);
        }

        .article-body ul,
        .article-body ol {
            margin: 1rem 0 1.5rem 2rem;
            color: var(--text-secondary);
        }

        .article-body li {
            margin-bottom: 0.5rem;
        }

        .article-body blockquote {
            border-left: 4px solid var(--primary-color);
            padding-left: 2rem;
            margin: 2rem 0;
            color: var(--text-secondary);
            font-style: italic;
            background: rgba(0, 122, 255, 0.1);
            padding: 1.5rem;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }

        .article-body pre {
            background: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 2rem 0;
            overflow-x: auto;
            position: relative;
        }

        .article-body code {
            background: rgba(0, 122, 255, 0.1);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.9em;
            color: var(--primary-color);
        }

        .article-body pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        .article-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-link:hover {
            color: var(--secondary-color);
            transform: translateX(5px);
        }

        .nav-link.prev {
            flex-direction: row-reverse;
        }

        .nav-link.prev:hover {
            transform: translateX(-5px);
        }

        .back-to-blog {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            margin-bottom: 2rem;
            transition: var(--transition);
        }

        .back-to-blog:hover {
            color: var(--primary-color);
            transform: translateX(-5px);
        }

        .toc {
            background: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 0;
        }

        .toc h3 {
            margin: 0 0 1rem 0;
            color: var(--text-primary);
        }

        .toc ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .toc li {
            margin-bottom: 0.5rem;
        }

        .toc a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            display: block;
            padding: 0.25rem 0;
        }

        .toc a:hover {
            color: var(--primary-color);
            transform: translateX(5px);
        }

        @media (max-width: 768px) {
            .article-title {
                font-size: 2rem;
            }

            .article-meta {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .article-body {
                font-size: 1rem;
            }

            .article-body h2 {
                font-size: 1.5rem;
            }

            .article-body h3 {
                font-size: 1.2rem;
            }

            .article-navigation {
                flex-direction: column;
                gap: 1rem;
            }

            .article-layout {
                grid-template-columns: 1fr;
            }

            .article-sidebar {
                position: static;
                order: -1;
            }

            .toc {
                margin: 1rem 0;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <a href="../index.html" class="logo">
                    <span class="logo-icon">â—ˆ</span>
                    <span class="logo-text">Tech Blog</span>
                </a>
                <ul class="nav-menu">
                    <li class="nav-item"><a href="../index.html" class="nav-link">é¦–é¡µ</a></li>
                    <li class="nav-item"><a href="../index.html#articles" class="nav-link">æ–‡ç« </a></li>
                    <li class="nav-item"><a href="../index.html#about" class="nav-link">å…³äº</a></li>
                    <li class="nav-item"><a href="../index.html#contact" class="nav-link">è”ç³»</a></li>
                </ul>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <article>
        <div class="article-header">
            <div class="container">
                <a href="../index.html#articles" class="back-to-blog">
                    <span>â†</span>
                    <span>è¿”å›åšå®¢</span>
                </a>
                <h1 class="article-title">Unityå­˜å‚¨ç³»ç»Ÿè®¾è®¡ä¸å®ç°</h1>
                <div class="article-meta">
                    <span>ğŸ“… 2024-09-27</span>
                    <span>ğŸ·ï¸ Unityå¼€å‘</span>
                    <span>â±ï¸ é˜…è¯»æ—¶é—´ï¼š20åˆ†é’Ÿ</span>
                </div>
            </div>
        </div>

        <div class="article-content">
            <div class="container">
                <div class="article-layout">
                    <div class="article-body">
                        <p>
                            æ¸¸æˆå­˜å‚¨ç³»ç»Ÿæ˜¯æ¸¸æˆå¼€å‘ä¸­çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£ä¿å­˜å’ŒåŠ è½½æ¸¸æˆæ•°æ®ï¼ŒåŒ…æ‹¬ç©å®¶è¿›åº¦ã€è®¾ç½®ã€å­˜æ¡£ç­‰ã€‚
                            ä¸€ä¸ªè‰¯å¥½çš„å­˜å‚¨ç³»ç»Ÿéœ€è¦è€ƒè™‘æ•°æ®å®‰å…¨ã€æ€§èƒ½ä¼˜åŒ–ã€è·¨å¹³å°å…¼å®¹æ€§ç­‰å¤šä¸ªæ–¹é¢ã€‚
                            æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»Unityä¸­å­˜å‚¨ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°ï¼ŒåŒ…æ‹¬æœ¬åœ°å­˜å‚¨ã€äº‘å­˜å‚¨ã€æ•°æ®åºåˆ—åŒ–ç­‰å†…å®¹ã€‚
                        </p>

                        <h2 id="architecture">å­˜å‚¨ç³»ç»Ÿæ¶æ„è®¾è®¡</h2>
                        <p>
                            ä¸€ä¸ªå®Œæ•´çš„å­˜å‚¨ç³»ç»Ÿé€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªå±‚æ¬¡ï¼š
                        </p>

                        <ul>
                            <li><strong>æ•°æ®å±‚</strong>ï¼šå®šä¹‰éœ€è¦å­˜å‚¨çš„æ•°æ®ç»“æ„</li>
                            <li><strong>åºåˆ—åŒ–å±‚</strong>ï¼šå°†æ•°æ®è½¬æ¢ä¸ºå¯å­˜å‚¨çš„æ ¼å¼</li>
                            <li><strong>å­˜å‚¨å±‚</strong>ï¼šå®é™…çš„æ•°æ®å­˜å‚¨å’Œè¯»å–</li>
                            <li><strong>ç®¡ç†å±‚</strong>ï¼šç»Ÿä¸€ç®¡ç†å­˜å‚¨æ“ä½œ</li>
                        </ul>

                        <p>
                            ç³»ç»Ÿæ¶æ„å›¾å¦‚ä¸‹ï¼Œé€šè¿‡åˆ†å±‚è®¾è®¡ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°é«˜åº¦æ¨¡å—åŒ–å’Œå¯æ‰©å±•çš„å­˜å‚¨ç³»ç»Ÿï¼š
                        </p>

                        <pre><code class="language-csharp">// å­˜å‚¨ç³»ç»Ÿæ ¸å¿ƒæ¥å£
public interface IStorageSystem
{
    void Save&lt;T&gt;(string key, T data);
    T Load&lt;T&gt;(string key, T defaultValue = default(T));
    bool Exists(string key);
    void Delete(string key);
    void ClearAll();
}

// å­˜å‚¨æ•°æ®æ¥å£
public interface IStorageData
{
    string GetStorageKey();
    void OnBeforeSave();
    void OnAfterLoad();
}</code></pre>

                        <h2 id="data-structures">æ•°æ®ç»“æ„å®šä¹‰</h2>
                        <p>
                            é¦–å…ˆå®šä¹‰æ¸¸æˆæ•°æ®ç»“æ„ï¼Œè¿™äº›ç»“æ„å°†å†³å®šæˆ‘ä»¬èƒ½å­˜å‚¨å“ªäº›æ•°æ®ï¼š
                        </p>

                        <pre><code class="language-csharp">[System.Serializable]
public class PlayerData
{
    public string playerName;
    public int level;
    public float experience;
    public Vector3 position;
    public int health;
    public int maxHealth;
    public List&lt;string&gt; inventoryItems;
    public Dictionary&lt;string, int&gt; skills;

    public PlayerData()
    {
        playerName = "New Player";
        level = 1;
        experience = 0f;
        position = Vector3.zero;
        health = 100;
        maxHealth = 100;
        inventoryItems = new List&lt;string&gt;();
        skills = new Dictionary&lt;string, int&gt;();
    }
}

[System.Serializable]
public class GameSettings
{
    public float masterVolume = 1f;
    public float musicVolume = 0.8f;
    public float sfxVolume = 1f;
    public bool isFullscreen = true;
    public int resolutionIndex = 0;
    public string language = "zh-CN";
}

[System.Serializable]
public class GameSaveData
{
    public string saveId;
    public DateTime saveTime;
    public PlayerData playerData;
    public GameSettings settings;
    public int currentScene;
    public float playTime;

    public GameSaveData()
    {
        saveId = System.Guid.NewGuid().ToString();
        saveTime = DateTime.Now;
        playerData = new PlayerData();
        settings = new GameSettings();
        currentScene = 0;
        playTime = 0f;
    }
}</code></pre>

                        <h3>æ•°æ®éªŒè¯</h3>
                        <p>
                            ä¸ºäº†ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æ•°æ®éªŒè¯æœºåˆ¶ï¼š
                        </p>

                        <pre><code class="language-csharp">public static class DataValidator
{
    public static bool ValidatePlayerData(PlayerData data)
    {
        if (data == null) return false;
        if (string.IsNullOrEmpty(data.playerName)) return false;
        if (data.level < 1) return false;
        if (data.health < 0 || data.health > data.maxHealth) return false;
        if (data.experience < 0) return false;

        return true;
    }

    public static bool ValidateGameSettings(GameSettings settings)
    {
        if (settings == null) return false;
        if (settings.masterVolume < 0 || settings.masterVolume > 1) return false;
        if (settings.musicVolume < 0 || settings.musicVolume > 1) return false;
        if (settings.sfxVolume < 0 || settings.sfxVolume > 1) return false;

        return true;
    }
}</code></pre>

                        <h2 id="serialization">JSONåºåˆ—åŒ–ç³»ç»Ÿ</h2>
                        <p>
                            å®ç°ä¸€ä¸ªJSONåºåˆ—åŒ–å™¨æ¥å¤„ç†æ•°æ®è½¬æ¢ï¼ŒJSONæ ¼å¼å…·æœ‰è‰¯å¥½çš„å¯è¯»æ€§å’Œè·¨å¹³å°å…¼å®¹æ€§ï¼š
                        </p>

                        <pre><code class="language-csharp">using UnityEngine;
using System;
using System.IO;
using System.Text;

public class JsonSerializationHelper
{
    public static string Serialize&lt;T&gt;(T obj)
    {
        try
        {
            return JsonUtility.ToJson(obj, true);
        }
        catch (Exception e)
        {
            Debug.LogError($"åºåˆ—åŒ–å¤±è´¥: {e.Message}");
            return null;
        }
    }

    public static T Deserialize&lt;T&gt;(string json)
    {
        try
        {
            return JsonUtility.FromJson&lt;T&gt;(json);
        }
        catch (Exception e)
        {
            Debug.LogError($"ååºåˆ—åŒ–å¤±è´¥: {e.Message}");
            return default(T);
        }
    }

    public static bool TryDeserialize&lt;T&gt;(string json, out T result)
    {
        result = default(T);
        if (string.IsNullOrEmpty(json))
        {
            return false;
        }

        try
        {
            result = JsonUtility.FromJson&lt;T&gt;(json);
            return true;
        }
        catch
        {
            return false;
        }
    }

    // å¸¦å‹ç¼©çš„åºåˆ—åŒ–
    public static byte[] SerializeToBytes&lt;T&gt;(T obj)
    {
        string json = Serialize(obj);
        if (string.IsNullOrEmpty(json))
        {
            return null;
        }

        return Encoding.UTF8.GetBytes(json);
    }

    public static T DeserializeFromBytes&lt;T&gt;(byte[] data)
    {
        if (data == null || data.Length == 0)
        {
            return default(T);
        }

        string json = Encoding.UTF8.GetString(data);
        return Deserialize&lt;T&gt;(json);
    }
}</code></pre>

                        <h2 id="local-storage">æœ¬åœ°å­˜å‚¨å®ç°</h2>
                        <p>
                            å®ç°åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„æœ¬åœ°å­˜å‚¨ï¼Œæ”¯æŒæ•°æ®åŠ å¯†å’Œè·¨å¹³å°å…¼å®¹ï¼š
                        </p>

                        <pre><code class="language-csharp">using UnityEngine;
using System;
using System.IO;
using System.Security.Cryptography;
using System.Text;

public class LocalStorage : IStorageSystem
{
    private readonly string savePath;
    private readonly string encryptionKey;

    public LocalStorage(string subFolder = "GameData", string encryptionKey = null)
    {
        this.encryptionKey = encryptionKey;

        // è·å–æŒä¹…åŒ–æ•°æ®è·¯å¾„
        savePath = Path.Combine(Application.persistentDataPath, subFolder);

        // ç¡®ä¿ç›®å½•å­˜åœ¨
        if (!Directory.Exists(savePath))
        {
            Directory.CreateDirectory(savePath);
        }
    }

    public void Save&lt;T&gt;(string key, T data)
    {
        try
        {
            string json = JsonSerializationHelper.Serialize(data);
            if (string.IsNullOrEmpty(json))
            {
                Debug.LogError("æ•°æ®åºåˆ—åŒ–å¤±è´¥");
                return;
            }

            // åŠ å¯†æ•°æ®
            if (!string.IsNullOrEmpty(encryptionKey))
            {
                json = Encrypt(json, encryptionKey);
            }

            string filePath = GetFilePath(key);
            File.WriteAllText(filePath, json);

            Debug.Log($"æ•°æ®ä¿å­˜æˆåŠŸ: {key}");
        }
        catch (Exception e)
        {
            Debug.LogError($"ä¿å­˜æ•°æ®å¤±è´¥: {e.Message}");
        }
    }

    public T Load&lt;T&gt;(string key, T defaultValue = default(T))
    {
        try
        {
            string filePath = GetFilePath(key);
            if (!File.Exists(filePath))
            {
                return defaultValue;
            }

            string json = File.ReadAllText(filePath);

            // è§£å¯†æ•°æ®
            if (!string.IsNullOrEmpty(encryptionKey))
            {
                json = Decrypt(json, encryptionKey);
            }

            return JsonSerializationHelper.Deserialize&lt;T&gt;(json);
        }
        catch (Exception e)
        {
            Debug.LogError($"åŠ è½½æ•°æ®å¤±è´¥: {e.Message}");
            return defaultValue;
        }
    }

    public bool Exists(string key)
    {
        return File.Exists(GetFilePath(key));
    }

    public void Delete(string key)
    {
        try
        {
            string filePath = GetFilePath(key);
            if (File.Exists(filePath))
            {
                File.Delete(filePath);
                Debug.Log($"æ•°æ®åˆ é™¤æˆåŠŸ: {key}");
            }
        }
        catch (Exception e)
        {
            Debug.LogError($"åˆ é™¤æ•°æ®å¤±è´¥: {e.Message}");
        }
    }

    public void ClearAll()
    {
        try
        {
            if (Directory.Exists(savePath))
            {
                Directory.Delete(savePath, true);
                Directory.CreateDirectory(savePath);
                Debug.Log("æ‰€æœ‰æ•°æ®å·²æ¸…é™¤");
            }
        }
        catch (Exception e)
        {
            Debug.LogError($"æ¸…é™¤æ•°æ®å¤±è´¥: {e.Message}");
        }
    }

    private string GetFilePath(string key)
    {
        return Path.Combine(savePath, $"{key}.json");
    }

    // AESåŠ å¯†
    private string Encrypt(string plainText, string key)
    {
        byte[] keyBytes = Encoding.UTF8.GetBytes(key.PadRight(32).Substring(0, 32));
        byte[] ivBytes = Encoding.UTF8.GetBytes(key.PadRight(16).Substring(0, 16));

        using (Aes aes = Aes.Create())
        {
            aes.Key = keyBytes;
            aes.IV = ivBytes;

            ICryptoTransform encryptor = aes.CreateEncryptor(aes.Key, aes.IV);

            using (MemoryStream ms = new MemoryStream())
            {
                using (CryptoStream cs = new CryptoStream(ms, encryptor, CryptoStreamMode.Write))
                {
                    using (StreamWriter sw = new StreamWriter(cs))
                    {
                        sw.Write(plainText);
                    }
                    return Convert.ToBase64String(ms.ToArray());
                }
            }
        }
    }

    // AESè§£å¯†
    private string Decrypt(string cipherText, string key)
    {
        byte[] keyBytes = Encoding.UTF8.GetBytes(key.PadRight(32).Substring(0, 32));
        byte[] ivBytes = Encoding.UTF8.GetBytes(key.PadRight(16).Substring(0, 16));

        using (Aes aes = Aes.Create())
        {
            aes.Key = keyBytes;
            aes.IV = ivBytes;

            ICryptoTransform decryptor = aes.CreateDecryptor(aes.Key, aes.IV);

            using (MemoryStream ms = new MemoryStream(Convert.FromBase64String(cipherText)))
            {
                using (CryptoStream cs = new CryptoStream(ms, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader sr = new StreamReader(cs))
                    {
                        return sr.ReadToEnd();
                    }
                }
            }
        }
    }
}</code></pre>

                        <h2 id="storage-manager">å­˜å‚¨ç®¡ç†å™¨</h2>
                        <p>
                            åˆ›å»ºç»Ÿä¸€çš„å­˜å‚¨ç®¡ç†å™¨æ¥ç®¡ç†æ‰€æœ‰çš„å­˜å‚¨æ“ä½œï¼š
                        </p>

                        <pre><code class="language-csharp">using UnityEngine;
using System;
using System.Collections.Generic;

public class StorageManager : MonoBehaviour
{
    public static StorageManager Instance;

    [SerializeField] private string encryptionKey = "YourSecretKey123";
    [SerializeField] private bool autoSave = true;
    [SerializeField] private float autoSaveInterval = 60f;

    private IStorageSystem storage;
    private Dictionary&lt;string, object&gt; cachedData = new Dictionary&lt;string, object&gt;();
    private float nextAutoSaveTime;

    private void Awake()
    {
        if (Instance == null)
        {
            Instance = this;
            DontDestroyOnLoad(gameObject);
            InitializeStorage();
        }
        else
        {
            Destroy(gameObject);
        }
    }

    private void InitializeStorage()
    {
        storage = new LocalStorage("GameData", encryptionKey);
    }

    private void Update()
    {
        if (autoSave && Time.time >= nextAutoSaveTime)
        {
            AutoSave();
            nextAutoSaveTime = Time.time + autoSaveInterval;
        }
    }

    // é€šç”¨ä¿å­˜æ–¹æ³•
    public void SaveData&lt;T&gt;(string key, T data)
    {
        storage.Save(key, data);
        cachedData[key] = data;
    }

    // é€šç”¨åŠ è½½æ–¹æ³•
    public T LoadData&lt;T&gt;(string key, T defaultValue = default(T))
    {
        if (cachedData.ContainsKey(key))
        {
            return (T)cachedData[key];
        }

        T data = storage.Load&lt;T&gt;(key, defaultValue);
        cachedData[key] = data;
        return data;
    }

    // æ¸¸æˆå­˜æ¡£
    public void SaveGame(GameSaveData saveData)
    {
        try
        {
            // æ›´æ–°ä¿å­˜æ—¶é—´
            saveData.saveTime = DateTime.Now;

            // ä¿å­˜æ•°æ®
            SaveData(saveData.saveId, saveData);

            // æ›´æ–°å­˜æ¡£åˆ—è¡¨
            List&lt;GameSaveData&gt; saveList = GetSaveList();
            bool found = false;

            for (int i = 0; i &lt; saveList.Count; i++)
            {
                if (saveList[i].saveId == saveData.saveId)
                {
                    saveList[i] = saveData;
                    found = true;
                    break;
                }
            }

            if (!found)
            {
                saveList.Add(saveData);
            }

            SaveData("SaveList", saveList);

            Debug.Log($"æ¸¸æˆå­˜æ¡£æˆåŠŸ: {saveData.saveId}");
        }
        catch (Exception e)
        {
            Debug.LogError($"æ¸¸æˆå­˜æ¡£å¤±è´¥: {e.Message}");
        }
    }

    // æ¸¸æˆè¯»æ¡£
    public GameSaveData LoadGame(string saveId)
    {
        try
        {
            GameSaveData saveData = LoadData&lt;GameSaveData&gt;(saveId);
            if (saveData != null)
            {
                Debug.Log($"æ¸¸æˆè¯»æ¡£æˆåŠŸ: {saveId}");
                return saveData;
            }
            else
            {
                Debug.LogWarning($"å­˜æ¡£ä¸å­˜åœ¨: {saveId}");
                return null;
            }
        }
        catch (Exception e)
        {
            Debug.LogError($"æ¸¸æˆè¯»æ¡£å¤±è´¥: {e.Message}");
            return null;
        }
    }

    // è·å–å­˜æ¡£åˆ—è¡¨
    public List&lt;GameSaveData&gt; GetSaveList()
    {
        return LoadData&lt;List&lt;GameSaveData&gt;&gt;("SaveList", new List&lt;GameSaveData&gt;());
    }

    // åˆ é™¤å­˜æ¡£
    public void DeleteSave(string saveId)
    {
        try
        {
            storage.Delete(saveId);

            // æ›´æ–°å­˜æ¡£åˆ—è¡¨
            List&lt;GameSaveData&gt; saveList = GetSaveList();
            saveList.RemoveAll(s => s.saveId == saveId);
            SaveData("SaveList", saveList);

            // æ¸…é™¤ç¼“å­˜
            if (cachedData.ContainsKey(saveId))
            {
                cachedData.Remove(saveId);
            }

            Debug.Log($"å­˜æ¡£åˆ é™¤æˆåŠŸ: {saveId}");
        }
        catch (Exception e)
        {
            Debug.LogError($"åˆ é™¤å­˜æ¡£å¤±è´¥: {e.Message}");
        }
    }

    // è‡ªåŠ¨ä¿å­˜
    private void AutoSave()
    {
        if (GameManager.Instance != null)
        {
            GameSaveData currentData = GameManager.Instance.GetCurrentSaveData();
            if (currentData != null)
            {
                SaveGame(currentData);
                Debug.Log("è‡ªåŠ¨ä¿å­˜å®Œæˆ");
            }
        }
    }

    // æ¸…é™¤ç¼“å­˜
    public void ClearCache()
    {
        cachedData.Clear();
        Debug.Log("å­˜å‚¨ç¼“å­˜å·²æ¸…é™¤");
    }

    // å¯¼å‡ºå­˜æ¡£
    public bool ExportSave(string saveId, string exportPath)
    {
        try
        {
            string filePath = Path.Combine(Application.persistentDataPath, "GameData", $"{saveId}.json");
            if (File.Exists(filePath))
            {
                File.Copy(filePath, exportPath, true);
                Debug.Log($"å­˜æ¡£å¯¼å‡ºæˆåŠŸ: {exportPath}");
                return true;
            }
            return false;
        }
        catch (Exception e)
        {
            Debug.LogError($"å­˜æ¡£å¯¼å‡ºå¤±è´¥: {e.Message}");
            return false;
        }
    }

    // å¯¼å…¥å­˜æ¡£
    public bool ImportSave(string importPath, string saveId)
    {
        try
        {
            string filePath = Path.Combine(Application.persistentDataPath, "GameData", $"{saveId}.json");
            File.Copy(importPath, filePath, true);

            // æ¸…é™¤ç›¸å…³ç¼“å­˜
            if (cachedData.ContainsKey(saveId))
            {
                cachedData.Remove(saveId);
            }

            Debug.Log($"å­˜æ¡£å¯¼å…¥æˆåŠŸ: {saveId}");
            return true;
        }
        catch (Exception e)
        {
            Debug.LogError($"å­˜æ¡£å¯¼å…¥å¤±è´¥: {e.Message}");
            return false;
        }
    }
}</code></pre>

                        <h2 id="game-manager">æ¸¸æˆæ•°æ®ç®¡ç†å™¨</h2>
                        <p>
                            åˆ›å»ºä¸“é—¨çš„æ¸¸æˆæ•°æ®ç®¡ç†å™¨æ¥å¤„ç†æ¸¸æˆè¿è¡Œæ—¶çš„æ•°æ®ç®¡ç†ï¼š
                        </p>

                        <pre><code class="language-csharp">using UnityEngine;
using System.Collections.Generic;

public class GameManager : MonoBehaviour
{
    public static GameManager Instance;

    [Header("æ¸¸æˆæ•°æ®")]
    public GameSaveData currentSaveData;
    public string currentSaveId;
    public float gameTimer;

    private void Awake()
    {
        if (Instance == null)
        {
            Instance = this;
            DontDestroyOnLoad(gameObject);
        }
        else
        {
            Destroy(gameObject);
        }
    }

    private void Start()
    {
        // åŠ è½½æ¸¸æˆè®¾ç½®
        LoadGameSettings();
    }

    private void Update()
    {
        if (currentSaveData != null)
        {
            gameTimer += Time.deltaTime;
            currentSaveData.playTime = gameTimer;
        }
    }

    // åŠ è½½æ¸¸æˆè®¾ç½®
    public void LoadGameSettings()
    {
        GameSettings settings = StorageManager.Instance.LoadData&lt;GameSettings&gt;("GameSettings");
        if (settings != null)
        {
            currentSaveData.settings = settings;
            ApplySettings(settings);
        }
    }

    // ä¿å­˜æ¸¸æˆè®¾ç½®
    public void SaveGameSettings(GameSettings settings)
    {
        StorageManager.Instance.SaveData("GameSettings", settings);
        if (currentSaveData != null)
        {
            currentSaveData.settings = settings;
        }
    }

    // åº”ç”¨è®¾ç½®
    private void ApplySettings(GameSettings settings)
    {
        AudioListener.volume = settings.masterVolume;
        // åº”ç”¨å…¶ä»–è®¾ç½®...
    }

    // åˆ›å»ºæ–°æ¸¸æˆ
    public void NewGame()
    {
        currentSaveData = new GameSaveData();
        currentSaveId = currentSaveData.saveId;
        gameTimer = 0f;

        // åˆå§‹åŒ–ç©å®¶æ•°æ®
        InitializePlayerData();

        Debug.Log("æ–°æ¸¸æˆå·²åˆ›å»º");
    }

    // åˆå§‹åŒ–ç©å®¶æ•°æ®
    private void InitializePlayerData()
    {
        currentSaveData.playerData = new PlayerData();
        // è®¾ç½®åˆå§‹ä½ç½®ç­‰...
    }

    // æ›´æ–°ç©å®¶æ•°æ®
    public void UpdatePlayerData(GameObject player)
    {
        if (currentSaveData != null && player != null)
        {
            currentSaveData.playerData.position = player.transform.position;
            currentSaveData.playerData.health = player.GetComponent&lt;Health&gt;().currentHealth;
            // æ›´æ–°å…¶ä»–ç©å®¶æ•°æ®...
        }
    }

    // è·å–å½“å‰å­˜æ¡£æ•°æ®
    public GameSaveData GetCurrentSaveData()
    {
        if (currentSaveData != null)
        {
            return currentSaveData;
        }
        return null;
    }

    // å¿«é€Ÿä¿å­˜
    public void QuickSave()
    {
        if (currentSaveData != null)
        {
            // æ›´æ–°å½“å‰åœºæ™¯æ•°æ®
            currentSaveData.currentScene = UnityEngine.SceneManagement.SceneManager.GetActiveScene().buildIndex;

            // æ›´æ–°ç©å®¶æ•°æ®
            GameObject player = GameObject.FindGameObjectWithTag("Player");
            if (player != null)
            {
                UpdatePlayerData(player);
            }

            StorageManager.Instance.SaveGame(currentSaveData);
            Debug.Log("å¿«é€Ÿä¿å­˜å®Œæˆ");
        }
    }

    // å¿«é€ŸåŠ è½½
    public void QuickLoad()
    {
        if (!string.IsNullOrEmpty(currentSaveId))
        {
            GameSaveData saveData = StorageManager.Instance.LoadGame(currentSaveId);
            if (saveData != null)
            {
                LoadSaveData(saveData);
            }
        }
    }

    // åŠ è½½å­˜æ¡£æ•°æ®
    private void LoadSaveData(GameSaveData saveData)
    {
        currentSaveData = saveData;
        currentSaveId = saveData.saveId;
        gameTimer = saveData.playTime;

        // åˆ‡æ¢åœºæ™¯
        if (UnityEngine.SceneManagement.SceneManager.GetActiveScene().buildIndex != saveData.currentScene)
        {
            UnityEngine.SceneManagement.SceneManager.LoadScene(saveData.currentScene);
            // åœºæ™¯åŠ è½½å®Œæˆåä¼šåœ¨Startä¸­æ¢å¤æ•°æ®
        }
        else
        {
            // æ¢å¤ç©å®¶æ•°æ®
            RestorePlayerData();
        }

        // åº”ç”¨è®¾ç½®
        ApplySettings(saveData.settings);

        Debug.Log("å­˜æ¡£åŠ è½½å®Œæˆ");
    }

    // æ¢å¤ç©å®¶æ•°æ®
    private void RestorePlayerData()
    {
        GameObject player = GameObject.FindGameObjectWithTag("Player");
        if (player != null)
        {
            player.transform.position = currentSaveData.playerData.position;
            player.GetComponent&lt;Health&gt;().currentHealth = currentSaveData.playerData.health;
            // æ¢å¤å…¶ä»–ç©å®¶æ•°æ®...
        }
    }

    // åœºæ™¯åŠ è½½å®Œæˆåçš„å¤„ç†
    public void OnSceneLoaded()
    {
        if (currentSaveData != null)
        {
            // å»¶è¿Ÿä¸€å¸§ç¡®ä¿å¯¹è±¡å·²åˆ›å»º
            StartCoroutine(RestoreDataAfterSceneLoad());
        }
    }

    private System.Collections.IEnumerator RestoreDataAfterSceneLoad()
    {
        yield return null; // ç­‰å¾…ä¸€å¸§
        RestorePlayerData();
    }
}</code></pre>

                        <h2 id="cloud-storage">äº‘å­˜å‚¨é›†æˆ</h2>
                        <p>
                            ä¸ºæ¸¸æˆæ·»åŠ äº‘å­˜å‚¨åŠŸèƒ½ï¼Œå®ç°è·¨è®¾å¤‡çš„å­˜æ¡£åŒæ­¥ï¼š
                        </p>

                        <pre><code class="language-csharp">using UnityEngine;
using System;
using System.Collections;
using System.Text;
using UnityEngine.Networking;

public class CloudStorage : MonoBehaviour
{
    [SerializeField] private string apiBaseUrl = "https://your-api.com/api";
    [SerializeField] private string apiToken = "your-api-token";

    public IEnumerator UploadSave(string saveId, GameSaveData saveData, Action&lt;bool&gt; onComplete)
    {
        string json = JsonSerializationHelper.Serialize(saveData);
        if (string.IsNullOrEmpty(json))
        {
            onComplete?.Invoke(false);
            yield break;
        }

        WWWForm form = new WWWForm();
        form.AddField("save_id", saveId);
        form.AddField("save_data", json);
        form.AddField("api_token", apiToken);

        using (UnityWebRequest request = UnityWebRequest.Post($"{apiBaseUrl}/save/upload", form))
        {
            yield return request.SendWebRequest();

            if (request.result == UnityWebRequest.Result.Success)
            {
                Debug.Log("äº‘å­˜æ¡£ä¸Šä¼ æˆåŠŸ");
                onComplete?.Invoke(true);
            }
            else
            {
                Debug.LogError($"äº‘å­˜æ¡£ä¸Šä¼ å¤±è´¥: {request.error}");
                onComplete?.Invoke(false);
            }
        }
    }

    public IEnumerator DownloadSave(string saveId, Action&lt;GameSaveData&gt; onComplete)
    {
        WWWForm form = new WWWForm();
        form.AddField("save_id", saveId);
        form.AddField("api_token", apiToken);

        using (UnityWebRequest request = UnityWebRequest.Post($"{apiBaseUrl}/save/download", form))
        {
            yield return request.SendWebRequest();

            if (request.result == UnityWebRequest.Result.Success)
            {
                string json = request.downloadHandler.text;
                GameSaveData saveData = JsonSerializationHelper.Deserialize&lt;GameSaveData&gt;(json);
                onComplete?.Invoke(saveData);
            }
            else
            {
                Debug.LogError($"äº‘å­˜æ¡£ä¸‹è½½å¤±è´¥: {request.error}");
                onComplete?.Invoke(null);
            }
        }
    }

    public IEnumerator GetSaveList(Action&lt;List&lt;GameSaveData&gt;&gt; onComplete)
    {
        WWWForm form = new WWWForm();
        form.AddField("api_token", apiToken);

        using (UnityWebRequest request = UnityWebRequest.Post($"{apiBaseUrl}/save/list", form))
        {
            yield return request.SendWebRequest();

            if (request.result == UnityWebRequest.Result.Success)
            {
                string json = request.downloadHandler.text;
                SaveListResponse response = JsonSerializationHelper.Deserialize&lt;SaveListResponse&gt;(json);
                onComplete?.Invoke(response.saves);
            }
            else
            {
                Debug.LogError($"è·å–äº‘å­˜æ¡£åˆ—è¡¨å¤±è´¥: {request.error}");
                onComplete?.Invoke(null);
            }
        }
    }

    [System.Serializable]
    private class SaveListResponse
    {
        public List&lt;GameSaveData&gt; saves;
    }

    // åŒæ­¥æœ¬åœ°å’Œäº‘ç«¯å­˜æ¡£
    public IEnumerator SyncSaves()
    {
        // è·å–äº‘ç«¯å­˜æ¡£åˆ—è¡¨
        List&lt;GameSaveData&gt; cloudSaves = null;
        yield return StartCoroutine(GetSaveList((saves) => cloudSaves = saves));

        if (cloudSaves == null)
        {
            Debug.LogError("æ— æ³•è·å–äº‘ç«¯å­˜æ¡£åˆ—è¡¨");
            yield break;
        }

        // è·å–æœ¬åœ°å­˜æ¡£åˆ—è¡¨
        List&lt;GameSaveData&gt; localSaves = StorageManager.Instance.GetSaveList();

        // åŒæ­¥é€»è¾‘
        foreach (var cloudSave in cloudSaves)
        {
            var localSave = localSaves.Find(s => s.saveId == cloudSave.saveId);

            if (localSave == null)
            {
                // äº‘ç«¯æœ‰ï¼Œæœ¬åœ°æ²¡æœ‰ï¼Œä¸‹è½½åˆ°æœ¬åœ°
                yield return StartCoroutine(DownloadSave(cloudSave.saveId, (downloadedSave) => {
                    if (downloadedSave != null)
                    {
                        StorageManager.Instance.SaveGame(downloadedSave);
                    }
                }));
            }
            else if (cloudSave.saveTime > localSave.saveTime)
            {
                // äº‘ç«¯æ›´æ–°ï¼Œä¸‹è½½åˆ°æœ¬åœ°
                yield return StartCoroutine(DownloadSave(cloudSave.saveId, (downloadedSave) => {
                    if (downloadedSave != null)
                    {
                        StorageManager.Instance.SaveGame(downloadedSave);
                    }
                }));
            }
        }

        // ä¸Šä¼ æœ¬åœ°æ–°å­˜æ¡£åˆ°äº‘ç«¯
        foreach (var localSave in localSaves)
        {
            var cloudSave = cloudSaves.Find(s => s.saveId == localSave.saveId);

            if (cloudSave == null || localSave.saveTime > cloudSave.saveTime)
            {
                yield return StartCoroutine(UploadSave(localSave.saveId, localSave, (success) => {
                    if (success)
                    {
                        Debug.Log($"å­˜æ¡£ {localSave.saveId} åŒæ­¥åˆ°äº‘ç«¯æˆåŠŸ");
                    }
                }));
            }
        }

        Debug.Log("å­˜æ¡£åŒæ­¥å®Œæˆ");
    }
}</code></pre>

                        <h2 id="best-practices">æœ€ä½³å®è·µ</h2>
                        <h3>1. æ•°æ®å®‰å…¨</h3>
                        <ul>
                            <li>ä½¿ç”¨åŠ å¯†ä¿æŠ¤æ•æ„Ÿæ•°æ®</li>
                            <li>å®ç°æ•°æ®æ ¡éªŒæœºåˆ¶</li>
                            <li>å®šæœŸå¤‡ä»½é‡è¦æ•°æ®</li>
                            <li>æ·»åŠ é˜²ä½œå¼Šæªæ–½</li>
                        </ul>

                        <h3>2. æ€§èƒ½ä¼˜åŒ–</h3>
                        <ul>
                            <li>ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤è¯»å–</li>
                            <li>å¼‚æ­¥å¤„ç†å¤§æ–‡ä»¶</li>
                            <li>å‹ç¼©å­˜å‚¨æ•°æ®</li>
                            <li>åˆç†è®¾ç½®è‡ªåŠ¨ä¿å­˜é—´éš”</li>
                        </ul>

                        <h3>3. ç”¨æˆ·ä½“éªŒ</h3>
                        <ul>
                            <li>æä¾›ä¿å­˜è¿›åº¦æç¤º</li>
                            <li>æ”¯æŒå­˜æ¡£å¯¼å‡º/å¯¼å…¥</li>
                            <li>å®ç°å¿«é€Ÿä¿å­˜åŠŸèƒ½</li>
                            <li>æ·»åŠ å­˜æ¡£æˆªå›¾åŠŸèƒ½</li>
                        </ul>

                        <h3>4. é”™è¯¯å¤„ç†</h3>
                        <ul>
                            <li>å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
                            <li>æ•°æ®æ¢å¤åŠŸèƒ½</li>
                            <li>å­˜å‚¨ç©ºé—´æ£€æŸ¥</li>
                            <li>ç½‘ç»œçŠ¶æ€å¤„ç†</li>
                        </ul>

                        <h2 id="error-handling">é”™è¯¯å¤„ç†å’Œæ¢å¤</h2>
                        <p>
                            å¥å£®çš„é”™è¯¯å¤„ç†æœºåˆ¶å¯¹äºå­˜å‚¨ç³»ç»Ÿè‡³å…³é‡è¦ï¼š
                        </p>

                        <pre><code class="language-csharp">public class StorageErrorHandler : MonoBehaviour
{
    public static void HandleStorageError(Exception e, string operation)
    {
        Debug.LogError($"å­˜å‚¨æ“ä½œå¤±è´¥: {operation} - {e.Message}");

        // æ ¹æ®é”™è¯¯ç±»å‹é‡‡å–ä¸åŒçš„æ¢å¤ç­–ç•¥
        if (e is IOException)
        {
            HandleIOError(e as IOException);
        }
        else if (e is UnauthorizedAccessException)
        {
            HandlePermissionError(e as UnauthorizedAccessException);
        }
        else
        {
            HandleGenericError(e);
        }
    }

    private static void HandleIOError(IOException e)
    {
        Debug.LogWarning("IOé”™è¯¯ï¼Œå¯èƒ½æ˜¯å­˜å‚¨ç©ºé—´ä¸è¶³æˆ–æ–‡ä»¶è¢«å ç”¨");

        // æ£€æŸ¥å­˜å‚¨ç©ºé—´
        long freeSpace = GetFreeDiskSpace();
        if (freeSpace < 100 * 1024 * 1024) // å°äº100MB
        {
            Debug.LogError("å­˜å‚¨ç©ºé—´ä¸è¶³");
            // æç¤ºç”¨æˆ·æ¸…ç†ç©ºé—´
        }
    }

    private static void HandlePermissionError(UnauthorizedAccessException e)
    {
        Debug.LogWarning("æƒé™é”™è¯¯ï¼Œæ— æ³•è®¿é—®å­˜å‚¨ä½ç½®");
        // å°è¯•ä½¿ç”¨å¤‡ç”¨å­˜å‚¨ä½ç½®
    }

    private static void HandleGenericError(Exception e)
    {
        Debug.LogWarning("é€šç”¨å­˜å‚¨é”™è¯¯");
        // è®°å½•é”™è¯¯æ—¥å¿—ï¼Œå°è¯•æ¢å¤
    }

    private static long GetFreeDiskSpace()
    {
        try
        {
            string drive = Path.GetPathRoot(Application.persistentDataPath);
            DriveInfo driveInfo = new DriveInfo(drive);
            return driveInfo.AvailableFreeSpace;
        }
        catch
        {
            return -1;
        }
    }
}</code></pre>

                        <h2 id="platform-compatibility">è·¨å¹³å°å…¼å®¹æ€§</h2>
                        <p>
                            ç¡®ä¿å­˜å‚¨ç³»ç»Ÿåœ¨ä¸åŒå¹³å°ä¸Šéƒ½èƒ½æ­£å¸¸å·¥ä½œï¼š
                        </p>

                        <pre><code class="language-csharp">public class PlatformStorageAdapter : MonoBehaviour
{
    public static string GetPlatformSavePath()
    {
        #if UNITY_EDITOR
            return Path.Combine(Application.dataPath, "../Saves");
        #elif UNITY_ANDROID
            return Path.Combine(Application.persistentDataPath, "Saves");
        #elif UNITY_IOS
            return Path.Combine(Application.persistentDataPath, "Saves");
        #elif UNITY_STANDALONE_WIN
            return Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments), "MyGame/Saves");
        #elif UNITY_STANDALONE_OSX
            return Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Personal), "Library/Application Support/MyGame/Saves");
        #else
            return Path.Combine(Application.persistentDataPath, "Saves");
        #endif
    }

    public static bool CheckPlatformPermissions()
    {
        #if UNITY_ANDROID
            // æ£€æŸ¥Androidå­˜å‚¨æƒé™
            if (!UnityEngine.Android.Permission.HasUserAuthorizedPermission(UnityEngine.Android.Permission.ExternalStorageWrite))
            {
                UnityEngine.Android.Permission.RequestUserPermission(UnityEngine.Android.Permission.ExternalStorageWrite);
                return false;
            }
        #endif
        return true;
    }

    public static string GetPlatformSpecificKey(string baseKey)
    {
        // ä¸ºä¸åŒå¹³å°æ·»åŠ ç‰¹å®šçš„å‰ç¼€
        #if UNITY_ANDROID
            return $"android_{baseKey}";
        #elif UNITY_IOS
            return $"ios_{baseKey}";
        #else
            return baseKey;
        #endif
    }
}</code></pre>

                        <blockquote>
                            <p>
                                "å­˜å‚¨ç³»ç»Ÿæ˜¯æ¸¸æˆä½“éªŒçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚
                                ä¸€ä¸ªè‰¯å¥½çš„å­˜å‚¨ç³»ç»Ÿä¸ä»…è¦åŠŸèƒ½å®Œå–„ï¼Œè¿˜è¦è€ƒè™‘åˆ°ç”¨æˆ·ä½“éªŒã€æ•°æ®å®‰å…¨å’Œè·¨å¹³å°å…¼å®¹æ€§ã€‚
                                é€šè¿‡åˆç†çš„è®¾è®¡å’Œå®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç©å®¶æä¾›æ— ç¼çš„æ¸¸æˆä½“éªŒã€‚"
                            </p>
                        </blockquote>

                        <h2>æ€»ç»“</h2>
                        <p>
                            å­˜å‚¨ç³»ç»Ÿæ˜¯æ¸¸æˆå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚é€šè¿‡åˆç†è®¾è®¡å’Œå®ç°å­˜å‚¨ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç©å®¶æä¾›ç¨³å®šã€å®‰å…¨ã€ä¾¿æ·çš„æ¸¸æˆæ•°æ®ç®¡ç†ä½“éªŒã€‚
                        </p>

                        <p>
                            å…³é”®è¦ç‚¹ï¼š
                        </p>
                        <ul>
                            <li>è®¾è®¡çµæ´»çš„æ•°æ®ç»“æ„</li>
                            <li>å®ç°å¯é çš„æ•°æ®åºåˆ—åŒ–</li>
                            <li>ä¿è¯æ•°æ®å®‰å…¨å’Œå®Œæ•´æ€§</li>
                            <li>ä¼˜åŒ–å­˜å‚¨æ€§èƒ½</li>
                            <li>æä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ</li>
                        </ul>

                        <p>
                            é€šè¿‡æŒæ¡å­˜å‚¨ç³»ç»Ÿçš„è®¾è®¡å’Œå®ç°ï¼Œä½ å°†èƒ½å¤Ÿä¸ºç©å®¶æä¾›æ›´åŠ å®Œå–„çš„æ¸¸æˆä½“éªŒï¼Œ
                            ç¡®ä¿æ¸¸æˆæ•°æ®çš„å®‰å…¨å’Œå¯é æ€§ã€‚
                        </p>
                    </div>

                    <div class="article-sidebar">
                        <div class="toc">
                            <h3>ç›®å½•</h3>
                            <ul>
                                <li><a href="#architecture">å­˜å‚¨ç³»ç»Ÿæ¶æ„è®¾è®¡</a></li>
                                <li><a href="#data-structures">æ•°æ®ç»“æ„å®šä¹‰</a></li>
                                <li><a href="#serialization">JSONåºåˆ—åŒ–ç³»ç»Ÿ</a></li>
                                <li><a href="#local-storage">æœ¬åœ°å­˜å‚¨å®ç°</a></li>
                                <li><a href="#storage-manager">å­˜å‚¨ç®¡ç†å™¨</a></li>
                                <li><a href="#game-manager">æ¸¸æˆæ•°æ®ç®¡ç†å™¨</a></li>
                                <li><a href="#cloud-storage">äº‘å­˜å‚¨é›†æˆ</a></li>
                                <li><a href="#best-practices">æœ€ä½³å®è·µ</a></li>
                                <li><a href="#error-handling">é”™è¯¯å¤„ç†å’Œæ¢å¤</a></li>
                                <li><a href="#platform-compatibility">è·¨å¹³å°å…¼å®¹æ€§</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="article-navigation">
                    <a href="unity-object-pooling.html" class="nav-link prev">
                        <span>â† ä¸Šä¸€ç¯‡</span>
                        <span>Unityå¯¹è±¡æ± æŠ€æœ¯è¯¦è§£</span>
                    </a>
                    <a href="unity-raycasting.html" class="nav-link next">
                        <span>ä¸‹ä¸€ç¯‡</span>
                        <span>Unityå°„çº¿æ£€æµ‹æŠ€æœ¯è¯¦è§£ â†’</span>
                    </a>
                </div>
            </div>
        </div>
    </article>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Tech Blog</h3>
                    <p>åˆ†äº«æŠ€æœ¯ï¼Œä¼ æ’­çŸ¥è¯†</p>
                </div>
                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul class="footer-links">
                        <li><a href="../index.html">é¦–é¡µ</a></li>
                        <li><a href="../index.html#articles">æ–‡ç« </a></li>
                        <li><a href="../index.html#about">å…³äº</a></li>
                        <li><a href="../index.html#contact">è”ç³»</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>æŠ€æœ¯æ ˆ</h4>
                    <ul class="footer-links">
                        <li><a href="#">Unity</a></li>
                        <li><a href="#">C#</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Tech Blog. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="../script.js"></script>

    <script>
        // ç›®å½•é«˜äº®å’Œæ»šåŠ¨æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            const tocLinks = document.querySelectorAll('.toc a');
            const sections = [];

            // æ”¶é›†æ‰€æœ‰ç« èŠ‚
            tocLinks.forEach(link => {
                const targetId = link.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    sections.push({
                        id: targetId,
                        element: targetSection,
                        link: link
                    });
                }
            });

            // æ»šåŠ¨æ—¶é«˜äº®å½“å‰ç« èŠ‚
            function highlightActiveSection() {
                const scrollPosition = window.scrollY + 150; // åç§»é‡

                sections.forEach(section => {
                    const sectionTop = section.element.offsetTop;
                    const sectionBottom = sectionTop + section.element.offsetHeight;

                    if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                        // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
                        tocLinks.forEach(link => link.classList.remove('active'));
                        // æ·»åŠ å½“å‰æ´»åŠ¨çŠ¶æ€
                        section.link.classList.add('active');
                    }
                });
            }

            // å¹³æ»‘æ»šåŠ¨åˆ°ç« èŠ‚
            tocLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);

                    if (targetSection) {
                        const offsetTop = targetSection.offsetTop - 100; // è€ƒè™‘å›ºå®šå¯¼èˆªæ 
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // ç›‘å¬æ»šåŠ¨äº‹ä»¶
            window.addEventListener('scroll', highlightActiveSection);
            highlightActiveSection(); // åˆå§‹åŒ–
        });
    </script>

    <style>
        /* ç›®å½•é«˜äº®æ ·å¼ */
        .toc a.active {
            color: var(--primary-color);
            font-weight: 600;
            border-left: 3px solid var(--primary-color);
            padding-left: 1rem;
        }

        .toc a {
            transition: all 0.3s ease;
            padding-left: 1rem;
            border-left: 3px solid transparent;
        }

        /* å¹³æ»‘æ»šåŠ¨ */
        html {
            scroll-behavior: smooth;
        }
    </style>
</body>
</html>