<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unityå°„çº¿æ£€æµ‹æŠ€æœ¯è¯¦è§£ - Tech Blog</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-csharp.min.js"></script>
    <style>
        .article-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 100px 0 80px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .article-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .article-header-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .article-header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .article-meta {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .article-content-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 60px;
        }

        .article-main {
            min-width: 0;
        }

        .article-sidebar {
            position: sticky;
            top: 20px;
            height: fit-content;
        }

        .toc-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .toc-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .toc-list li {
            margin-bottom: 8px;
        }

        .toc-list a {
            color: #666;
            text-decoration: none;
            padding: 5px 0;
            display: block;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            padding-left: 10px;
        }

        .toc-list a:hover {
            color: #667eea;
            border-left-color: #667eea;
            padding-left: 15px;
        }

        .article-section {
            margin-bottom: 50px;
            scroll-margin-top: 100px;
        }

        .article-section h2 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .article-section h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 30px 0 15px;
            color: #444;
        }

        .article-section p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #555;
        }

        .article-section ul, .article-section ol {
            margin: 15px 0;
            padding-left: 20px;
        }

        .article-section li {
            margin-bottom: 8px;
            line-height: 1.6;
            color: #555;
        }

        .article-section pre {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            border: 1px solid #444;
        }

        .article-section code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .highlight-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .highlight-box h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .article-content-container {
                grid-template-columns: 1fr;
                gap: 40px;
                padding: 40px 15px;
            }

            .article-header h1 {
                font-size: 2.2rem;
            }

            .article-meta {
                gap: 15px;
                font-size: 1rem;
            }

            .article-sidebar {
                position: static;
            }

            .toc-container {
                order: -1;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <a href="../index.html" class="logo">
                    <span class="logo-icon">â—ˆ</span>
                    <span class="logo-text">Tech Blog</span>
                </a>
                <ul class="nav-menu">
                    <li class="nav-item"><a href="../index.html#home" class="nav-link">é¦–é¡µ</a></li>
                    <li class="nav-item"><a href="../index.html#works" class="nav-link">ä½œå“</a></li>
                    <li class="nav-item"><a href="../index.html#articles" class="nav-link">æ–‡ç« </a></li>
                    <li class="nav-item"><a href="../index.html#about" class="nav-link">å…³äº</a></li>
                    <li class="nav-item"><a href="../index.html#contact" class="nav-link">è”ç³»</a></li>
                </ul>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <header class="article-header">
        <div class="article-header-content">
            <h1>Unityå°„çº¿æ£€æµ‹æŠ€æœ¯è¯¦è§£</h1>
            <div class="article-meta">
                <span class="article-date">ğŸ“… 2024-09-27</span>
                <span class="article-category">ğŸ·ï¸ Unityå¼€å‘</span>
                <span class="article-reading-time">â±ï¸ é˜…è¯»æ—¶é—´: 18åˆ†é’Ÿ</span>
            </div>
        </div>
    </header>

    <main class="article-content-container">
        <div class="article-main">
            <article class="article-content">
                <section id="introduction" class="article-section">
                    <h2>å¼•è¨€</h2>
                    <p>å°„çº¿æ£€æµ‹ï¼ˆRaycastingï¼‰æ˜¯Unityä¸­æœ€é‡è¦çš„ç©ºé—´æ£€æµ‹æŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒå…è®¸æˆ‘ä»¬æ£€æµ‹ä»æŸä¸ªç‚¹æ²¿æŸä¸ªæ–¹å‘å‘å°„çš„è™šæ‹Ÿå°„çº¿ä¸åœºæ™¯ä¸­ç‰©ä½“çš„ç¢°æ’æƒ…å†µã€‚å°„çº¿æ£€æµ‹åœ¨æ¸¸æˆå¼€å‘ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬ç„å‡†ç³»ç»Ÿã€ç‚¹å‡»æ£€æµ‹ã€AIè§†è§‰ã€ç‰©ç†äº¤äº’ç­‰ã€‚</p>
                    <p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Unityå°„çº¿æ£€æµ‹çš„åŸç†ã€æ–¹æ³•å’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡è¿™ä¸€å…³é”®æŠ€æœ¯ã€‚</p>
                </section>

                <section id="basics" class="article-section">
                    <h2>å°„çº¿æ£€æµ‹åŸºç¡€</h2>
                    <h3>ä»€ä¹ˆæ˜¯å°„çº¿æ£€æµ‹</h3>
                    <p>å°„çº¿æ£€æµ‹æ˜¯ä»ä¸€ä¸ªèµ·ç‚¹æ²¿ç‰¹å®šæ–¹å‘å‘å°„ä¸€æ¡æ— é™é•¿çš„è™šæ‹Ÿå°„çº¿ï¼Œæ£€æµ‹è¿™æ¡å°„çº¿ä¸åœºæ™¯ä¸­ç¢°æ’ä½“çš„ç›¸äº¤æƒ…å†µã€‚å°„çº¿æ£€æµ‹è¿”å›çš„ä¿¡æ¯åŒ…æ‹¬ï¼š</p>
                    <ul>
                        <li>æ˜¯å¦ç¢°æ’åˆ°ç‰©ä½“</li>
                        <li>ç¢°æ’ç‚¹çš„ä½ç½®</li>
                        <li>ç¢°æ’ç‚¹çš„æ³•çº¿</li>
                        <li>ç¢°æ’è·ç¦»</li>
                        <li>ç¢°æ’çš„ç‰©ä½“</li>
                    </ul>

                    <h3>åŸºç¡€å°„çº¿æ£€æµ‹</h3>
                    <pre><code class="language-csharp">using UnityEngine;

public class BasicRaycast : MonoBehaviour
{
    public float rayLength = 10f;
    public LayerMask targetLayer;

    private void Update()
    {
        // ä»æ‘„åƒæœºä½ç½®å‘å°„å°„çº¿
        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);
        RaycastHit hit;

        if (Physics.Raycast(ray, out hit, rayLength, targetLayer))
        {
            Debug.Log($"æ£€æµ‹åˆ°ç‰©ä½“: {hit.collider.name}");
            Debug.Log($"ç¢°æ’ä½ç½®: {hit.point}");
            Debug.Log($"ç¢°æ’è·ç¦»: {hit.distance}");
            Debug.Log($"ç¢°æ’æ³•çº¿: {hit.normal}");

            // åœ¨ç¢°æ’ç‚¹ç»˜åˆ¶æ ‡è®°
            Debug.DrawRay(hit.point, hit.normal * 0.5f, Color.red);
        }

        // ç»˜åˆ¶å°„çº¿
        Debug.DrawRay(ray.origin, ray.direction * rayLength, Color.green);
    }
}</code></pre>
                </section>

                <section id="methods" class="article-section">
                    <h2>å°„çº¿æ£€æµ‹æ–¹æ³•è¯¦è§£</h2>
                    <h3>1. Physics.Raycast</h3>
                    <p>æœ€å¸¸ç”¨çš„å°„çº¿æ£€æµ‹æ–¹æ³•ï¼Œæ£€æµ‹ç¬¬ä¸€ä¸ªç¢°æ’çš„ç‰©ä½“ï¼š</p>
                    <pre><code class="language-csharp">// é‡è½½æ–¹æ³•1ï¼šåŸºç¡€ç‰ˆæœ¬
bool Physics.Raycast(Vector3 origin, Vector3 direction, out RaycastHit hitInfo);

// é‡è½½æ–¹æ³•2ï¼šå¸¦è·ç¦»é™åˆ¶
bool Physics.Raycast(Vector3 origin, Vector3 direction, out RaycastHit hitInfo, float distance);

// é‡è½½æ–¹æ³•3ï¼šå¸¦å±‚çº§è¿‡æ»¤
bool Physics.Raycast(Vector3 origin, Vector3 direction, out RaycastHit hitInfo, float distance, LayerMask layerMask);

// é‡è½½æ–¹æ³•4ï¼šä½¿ç”¨Rayå¯¹è±¡
bool Physics.Raycast(Ray ray, out RaycastHit hitInfo);

// é‡è½½æ–¹æ³•5ï¼šå®Œæ•´ç‰ˆæœ¬
bool Physics.Raycast(Ray ray, out RaycastHit hitInfo, float distance, LayerMask layerMask, QueryTriggerInteraction queryTriggerInteraction);

// ä½¿ç”¨ç¤ºä¾‹
public void DetectObjects()
{
    Vector3 origin = transform.position;
    Vector3 direction = transform.forward;
    RaycastHit hit;
    float maxDistance = 100f;
    LayerMask targetLayers = LayerMask.GetMask("Enemy", "Obstacle");

    if (Physics.Raycast(origin, direction, out hit, maxDistance, targetLayers))
    {
        Debug.Log($"å‡»ä¸­ç›®æ ‡: {hit.collider.gameObject.name}");

        // è·å–ç¢°æ’çš„ç»„ä»¶
        Enemy enemy = hit.collider.GetComponent&lt;Enemy&gt;();
        if (enemy != null)
        {
            enemy.TakeDamage(50);
        }
    }
}</code></pre>

                    <h3>2. Physics.RaycastAll</h3>
                    <p>æ£€æµ‹æ‰€æœ‰ä¸å°„çº¿ç›¸äº¤çš„ç‰©ä½“ï¼š</p>
                    <pre><code class="language-csharp">public void DetectAllObjects()
{
    Vector3 origin = transform.position;
    Vector3 direction = transform.forward;
    float maxDistance = 50f;

    RaycastHit[] allHits = Physics.RaycastAll(origin, direction, maxDistance);

    // æŒ‰è·ç¦»æ’åº
    System.Array.Sort(allHits, (a, b) => a.distance.CompareTo(b.distance));

    foreach (RaycastHit hit in allHits)
    {
        Debug.Log($"å‡»ä¸­ç‰©ä½“: {hit.collider.name}, è·ç¦»: {hit.distance}");

        // ç»˜åˆ¶ç¢°æ’ç‚¹
        Debug.DrawRay(hit.point, hit.normal * 0.3f, Color.red, 1f);
    }
}</code></pre>

                    <h3>3. Physics.RaycastNonAlloc</h3>
                    <p>é¿å…GCåˆ†é…çš„é«˜æ•ˆå°„çº¿æ£€æµ‹ï¼š</p>
                    <pre><code class="language-csharp">public class EfficientRaycast : MonoBehaviour
{
    private RaycastHit[] hits = new RaycastHit[10];
    public float rayLength = 100f;

    private void Update()
    {
        int hitCount = Physics.RaycastNonAlloc(
            transform.position,
            transform.forward,
            hits,
            rayLength
        );

        for (int i = 0; i &lt; hitCount; i++)
        {
            RaycastHit hit = hits[i];
            Debug.Log($"å‡»ä¸­: {hit.collider.name}");
        }
    }
}</code></pre>
                </section>

                <section id="special-shapes" class="article-section">
                    <h2>ç‰¹æ®Šå½¢çŠ¶æ£€æµ‹</h2>
                    <h3>1. çƒå½¢æ£€æµ‹ï¼ˆSphereCastï¼‰</h3>
                    <pre><code class="language-csharp">public void SphereCastDetection()
{
    float sphereRadius = 2f;
    float maxDistance = 50f;
    RaycastHit hit;

    if (Physics.SphereCast(
        transform.position,
        sphereRadius,
        transform.forward,
        out hit,
        maxDistance
    ))
    {
        Debug.Log($"çƒå½¢æ£€æµ‹åˆ°: {hit.collider.name}");
        Debug.DrawRay(transform.position, transform.forward * hit.distance, Color.blue);

        // ç»˜åˆ¶çƒå½¢æ£€æµ‹èŒƒå›´
        Gizmos.color = Color.cyan;
        Gizmos.DrawWireSphere(transform.position + transform.forward * hit.distance, sphereRadius);
    }
}</code></pre>

                    <h3>2. ç›’å½¢æ£€æµ‹ï¼ˆBoxCastï¼‰</h3>
                    <pre><code class="language-csharp">public void BoxCastDetection()
{
    Vector3 boxSize = new Vector3(2f, 1f, 1f);
    float maxDistance = 30f;
    RaycastHit hit;

    if (Physics.BoxCast(
        transform.position,
        boxSize * 0.5f,
        transform.forward,
        out hit,
        transform.rotation,
        maxDistance
    ))
    {
        Debug.Log($"ç›’å½¢æ£€æµ‹åˆ°: {hit.collider.name}");

        // ç»˜åˆ¶ç›’å½¢æ£€æµ‹èŒƒå›´
        Gizmos.color = Color.yellow;
        Gizmos.matrix = Matrix4x4.TRS(
            transform.position + transform.forward * hit.distance,
            transform.rotation,
            Vector3.one
        );
        Gizmos.DrawWireCube(Vector3.zero, boxSize);
        Gizmos.matrix = Matrix4x4.identity;
    }
}</code></pre>

                    <h3>3. èƒ¶å›Šæ£€æµ‹ï¼ˆCapsuleCastï¼‰</h3>
                    <pre><code class="language-csharp">public void CapsuleCastDetection()
{
    Vector3 point1 = transform.position;
    Vector3 point2 = transform.position + Vector3.up * 2f;
    float radius = 0.5f;
    float maxDistance = 40f;
    RaycastHit hit;

    if (Physics.CapsuleCast(
        point1,
        point2,
        radius,
        transform.forward,
        out hit,
        maxDistance
    ))
    {
        Debug.Log($"èƒ¶å›Šæ£€æµ‹åˆ°: {hit.collider.name}");
    }
}</code></pre>
                </section>

                <section id="applications" class="article-section">
                    <h2>å®é™…åº”ç”¨åœºæ™¯</h2>
                    <h3>1. å°„å‡»æ¸¸æˆç„å‡†ç³»ç»Ÿ</h3>
                    <pre><code class="language-csharp">public class WeaponSystem : MonoBehaviour
{
    public Transform firePoint;
    public float range = 100f;
    public int damage = 25;
    public LayerMask targetLayers;

    public void Shoot()
    {
        if (Physics.Raycast(firePoint.position, firePoint.forward, out RaycastHit hit, range, targetLayers))
        {
            // åˆ›å»ºå°„å‡»ç‰¹æ•ˆ
            CreateShootEffect(hit.point);

            // å¯¹ç›®æ ‡é€ æˆä¼¤å®³
            IDamageable damageable = hit.collider.GetComponent&lt;IDamageable&gt;();
            if (damageable != null)
            {
                damageable.TakeDamage(damage);
            }

            // åˆ›å»ºå¼¹å­”
            CreateBulletHole(hit.point, hit.normal);
        }
    }

    private void CreateShootEffect(Vector3 position)
    {
        GameObject effect = Instantiate(shootEffectPrefab, position, Quaternion.identity);
        Destroy(effect, 1f);
    }

    private void CreateBulletHole(Vector3 position, Vector3 normal)
    {
        GameObject hole = Instantiate(bulletHolePrefab, position, Quaternion.LookRotation(normal));
        hole.transform.position += normal * 0.01f;
        Destroy(hole, 10f);
    }
}</code></pre>

                    <h3>2. ç‚¹å‡»äº¤äº’ç³»ç»Ÿ</h3>
                    <pre><code class="language-csharp">public class ClickInteraction : MonoBehaviour
{
    public LayerMask interactableLayers;

    private void Update()
    {
        if (Input.GetMouseButtonDown(0))
        {
            Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);
            RaycastHit hit;

            if (Physics.Raycast(ray, out hit, Mathf.Infinity, interactableLayers))
            {
                IInteractable interactable = hit.collider.GetComponent&lt;IInteractable&gt;();
                if (interactable != null)
                {
                    interactable.Interact();
                }
            }
        }
    }
}

public interface IInteractable
{
    void Interact();
    string GetInteractionPrompt();
}</code></pre>

                    <h3>3. AIè§†è§‰ç³»ç»Ÿ</h3>
                    <pre><code class="language-csharp">public class AIVision : MonoBehaviour
{
    public float visionRange = 30f;
    public float visionAngle = 60f;
    public LayerMask obstacleLayers;
    public LayerMask targetLayers;

    public bool CanSeeTarget(Transform target)
    {
        if (target == null) return false;

        // æ£€æŸ¥è·ç¦»
        float distance = Vector3.Distance(transform.position, target.position);
        if (distance > visionRange) return false;

        // æ£€æŸ¥è§’åº¦
        Vector3 directionToTarget = (target.position - transform.position).normalized;
        float angle = Vector3.Angle(transform.forward, directionToTarget);
        if (angle > visionAngle * 0.5f) return false;

        // æ£€æŸ¥éšœç¢ç‰©
        RaycastHit hit;
        if (Physics.Raycast(transform.position, directionToTarget, out hit, visionRange, obstacleLayers))
        {
            if (hit.collider.transform != target)
            {
                return false;
            }
        }

        return true;
    }

    public Transform GetVisibleTarget()
    {
        Collider[] targets = Physics.OverlapSphere(transform.position, visionRange, targetLayers);

        foreach (Collider targetCollider in targets)
        {
            Transform target = targetCollider.transform;
            if (CanSeeTarget(target))
            {
                return target;
            }
        }

        return null;
    }

    private void OnDrawGizmos()
    {
        // ç»˜åˆ¶è§†é‡èŒƒå›´
        Gizmos.color = Color.cyan;
        Gizmos.DrawWireSphere(transform.position, visionRange);

        // ç»˜åˆ¶è§†é‡è§’åº¦
        Vector3 leftDir = Quaternion.Euler(0, -visionAngle * 0.5f, 0) * transform.forward;
        Vector3 rightDir = Quaternion.Euler(0, visionAngle * 0.5f, 0) * transform.forward;

        Gizmos.color = Color.blue;
        Gizmos.DrawRay(transform.position, leftDir * visionRange);
        Gizmos.DrawRay(transform.position, rightDir * visionRange);
    }
}</code></pre>

                    <h3>4. åœ°å½¢é«˜åº¦æ£€æµ‹</h3>
                    <pre><code class="language-csharp">public class TerrainHeightDetector : MonoBehaviour
{
    public float detectionDistance = 10f;
    public LayerMask terrainLayers;

    private void Update()
    {
        // å‘ä¸‹æ£€æµ‹åœ°é¢
        if (Physics.Raycast(transform.position, Vector3.down, out RaycastHit hit, detectionDistance, terrainLayers))
        {
            // è°ƒæ•´ç‰©ä½“é«˜åº¦
            Vector3 targetPosition = transform.position;
            targetPosition.y = hit.point.y + 1f;
            transform.position = targetPosition;

            // è°ƒæ•´ç‰©ä½“æœå‘
            if (hit.normal != Vector3.up)
            {
                transform.rotation = Quaternion.FromToRotation(Vector3.up, hit.normal) * transform.rotation;
            }
        }
    }
}</code></pre>
                </section>

                <section id="advanced" class="article-section">
                    <h2>é«˜çº§å°„çº¿æ£€æµ‹æŠ€æœ¯</h2>
                    <h3>1. å°„çº¿æ£€æµ‹ä¼˜åŒ–</h3>
                    <pre><code class="language-csharp">public class OptimizedRaycast : MonoBehaviour
{
    // ä½¿ç”¨å¯¹è±¡æ± ç¼“å­˜RaycastHitæ•°ç»„
    private RaycastHit[] cachedHits;
    private int maxHits = 32;

    private void Awake()
    {
        cachedHits = new RaycastHit[maxHits];
    }

    public void PerformOptimizedRaycast()
    {
        // ä½¿ç”¨NonAllocé¿å…GC
        int hitCount = Physics.RaycastNonAlloc(
            transform.position,
            transform.forward,
            cachedHits,
            50f
        );

        // å¤„ç†ç¢°æ’
        for (int i = 0; i &lt; hitCount; i++)
        {
            ProcessHit(cachedHits[i]);
        }
    }

    private void ProcessHit(RaycastHit hit)
    {
        // å¤„ç†ç¢°æ’é€»è¾‘
        if (hit.collider.CompareTag("Enemy"))
        {
            Debug.Log("å‡»ä¸­æ•Œäºº");
        }
    }
}</code></pre>

                    <h3>2. ç´¯ç§¯æ£€æµ‹ï¼ˆLinecastï¼‰</h3>
                    <pre><code class="language-csharp">public class LinecastDetection : MonoBehaviour
{
    public Transform startPoint;
    public Transform endPoint;
    public LayerMask obstacleLayers;

    public bool IsPathClear()
    {
        return !Physics.Linecast(startPoint.position, endPoint.position, obstacleLayers);
    }

    private void OnDrawGizmos()
    {
        if (startPoint != null && endPoint != null)
        {
            Gizmos.color = IsPathClear() ? Color.green : Color.red;
            Gizmos.DrawLine(startPoint.position, endPoint.position);
        }
    }
}</code></pre>

                    <h3>3. é‡å æ£€æµ‹ï¼ˆOverlapï¼‰</h3>
                    <pre><code class="language-csharp">public class OverlapDetection : MonoBehaviour
{
    public float detectionRadius = 5f;
    public LayerMask targetLayers;

    public void DetectNearbyObjects()
    {
        // çƒå½¢é‡å æ£€æµ‹
        Collider[] nearbyColliders = Physics.OverlapSphere(transform.position, detectionRadius, targetLayers);

        foreach (Collider collider in nearbyColliders)
        {
            Debug.Log($"é™„è¿‘ç‰©ä½“: {collider.name}");
        }
    }

    // ç›’å½¢é‡å æ£€æµ‹
    public void DetectInBox()
    {
        Vector3 boxSize = new Vector3(10f, 5f, 10f);
        Collider[] boxColliders = Physics.OverlapBox(transform.position, boxSize * 0.5f, Quaternion.identity, targetLayers);

        foreach (Collider collider in boxColliders)
        {
            Debug.Log($"ç›’å†…ç‰©ä½“: {collider.name}");
        }
    }
}</code></pre>
                </section>

                <section id="optimization" class="article-section">
                    <h2>æ€§èƒ½ä¼˜åŒ–å’Œæœ€ä½³å®è·µ</h2>
                    <h3>1. æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
                    <ul>
                        <li><strong>ä½¿ç”¨NonAllocæ–¹æ³•</strong>ï¼šé¿å…GCåˆ†é…</li>
                        <li><strong>åˆç†è®¾ç½®æ£€æµ‹è·ç¦»</strong>ï¼šé¿å…è¿‡è¿œçš„æ£€æµ‹</li>
                        <li><strong>ä½¿ç”¨å±‚çº§è¿‡æ»¤</strong>ï¼šå‡å°‘ä¸å¿…è¦çš„æ£€æµ‹</li>
                        <li><strong>å¸§æ•°æ§åˆ¶</strong>ï¼šä¸åœ¨æ¯å¸§è¿›è¡Œå¤§é‡å°„çº¿æ£€æµ‹</li>
                        <li><strong>ç¼“å­˜ç»“æœ</strong>ï¼šå¯¹äºä¸é¢‘ç¹å˜åŒ–çš„å¯¹è±¡ç¼“å­˜æ£€æµ‹ç»“æœ</li>
                    </ul>

                    <h3>2. å±‚çº§ç®¡ç†</h3>
                    <pre><code class="language-csharp">public class LayerManagement : MonoBehaviour
{
    public LayerMask enemyLayer;
    public LayerMask obstacleLayer;
    public LayerMask interactableLayer;

    // è·å–å±‚çº§åç§°
    public string GetLayerName(LayerMask layerMask)
    {
        return LayerMask.LayerToName((int)Mathf.Log(layerMask.value, 2));
    }

    // åˆ›å»ºå±‚çº§æ©ç 
    public LayerMask CreateLayerMask(params string[] layerNames)
    {
        LayerMask mask = 0;
        foreach (string name in layerNames)
        {
            mask |= 1 &lt;&lt; LayerMask.NameToLayer(name);
        }
        return mask;
    }
}</code></pre>

                    <h3>3. é”™è¯¯å¤„ç†å’Œè°ƒè¯•</h3>
                    <pre><code class="language-csharp">public class SafeRaycast : MonoBehaviour
{
    public void SafeRaycastExample()
    {
        // æ£€æŸ¥ç›¸æœºæ˜¯å¦å­˜åœ¨
        if (Camera.main == null)
        {
            Debug.LogError("ä¸»ç›¸æœºä¸å­˜åœ¨");
            return;
        }

        // æ£€æŸ¥è¾“å…¥æ˜¯å¦æœ‰æ•ˆ
        if (Input.mousePosition.x &lt; 0 || Input.mousePosition.x > Screen.width ||
            Input.mousePosition.y &lt; 0 || Input.mousePosition.y > Screen.height)
        {
            return;
        }

        // æ‰§è¡Œå°„çº¿æ£€æµ‹
        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);
        if (Physics.Raycast(ray, out RaycastHit hit))
        {
            // å¤„ç†ç¢°æ’
            HandleHit(hit);
        }
    }

    private void HandleHit(RaycastHit hit)
    {
        try
        {
            // å®‰å…¨åœ°è·å–ç»„ä»¶
            var component = hit.collider.GetComponent&lt;SomeComponent&gt;();
            if (component != null)
            {
                component.DoSomething();
            }
        }
        catch (System.Exception e)
        {
            Debug.LogError($"å¤„ç†ç¢°æ’æ—¶å‘ç”Ÿé”™è¯¯: {e.Message}");
        }
    }
}</code></pre>
                </section>

                <section id="troubleshooting" class="article-section">
                    <h2>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>
                    <h3>é—®é¢˜1ï¼šå°„çº¿æ£€æµ‹ä¸åˆ°ç‰©ä½“</h3>
                    <p><strong>å¯èƒ½åŸå› </strong>ï¼š</p>
                    <ul>
                        <li>ç‰©ä½“æ²¡æœ‰ç¢°æ’ä½“ç»„ä»¶</li>
                        <li>å±‚çº§è®¾ç½®ä¸æ­£ç¡®</li>
                        <li>å°„çº¿è·ç¦»ä¸è¶³</li>
                        <li>ç‰©ä½“åœ¨è§¦å‘å™¨æ¨¡å¼ä¸‹</li>
                    </ul>
                    <p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
                    <ul>
                        <li>ç¡®ä¿ç‰©ä½“æœ‰ç¢°æ’ä½“</li>
                        <li>æ£€æŸ¥å±‚çº§è®¾ç½®</li>
                        <li>è°ƒæ•´æ£€æµ‹è·ç¦»</li>
                        <li>è®¾ç½®QueryTriggerInteractionå‚æ•°</li>
                    </ul>

                    <h3>é—®é¢˜2ï¼šæ€§èƒ½é—®é¢˜</h3>
                    <p><strong>å¯èƒ½åŸå› </strong>ï¼š</p>
                    <ul>
                        <li>æ¯å¸§è¿›è¡Œå¤§é‡å°„çº¿æ£€æµ‹</li>
                        <li>æ£€æµ‹è·ç¦»è¿‡å¤§</li>
                        <li>æ²¡æœ‰ä½¿ç”¨å±‚çº§è¿‡æ»¤</li>
                    </ul>
                    <p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
                    <ul>
                        <li>ä¼˜åŒ–æ£€æµ‹é¢‘ç‡</li>
                        <li>å‡å°‘æ£€æµ‹è·ç¦»</li>
                        <li>ä½¿ç”¨å±‚çº§è¿‡æ»¤</li>
                        <li>ä½¿ç”¨NonAllocæ–¹æ³•</li>
                    </ul>

                    <h3>é—®é¢˜3ï¼šç²¾ç¡®åº¦é—®é¢˜</h3>
                    <p><strong>å¯èƒ½åŸå› </strong>ï¼š</p>
                    <ul>
                        <li>æµ®ç‚¹ç²¾åº¦é—®é¢˜</li>
                        <li>ç¢°æ’ä½“è®¾ç½®é—®é¢˜</li>
                        <li>å°„çº¿èµ·ç‚¹ä½ç½®é—®é¢˜</li>
                    </ul>
                    <p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
                    <ul>
                        <li>è°ƒæ•´ç¢°æ’ä½“è®¾ç½®</li>
                        <li>ä½¿ç”¨åˆé€‚çš„æ£€æµ‹æ–¹æ³•</li>
                        <li>æ·»åŠ å®¹é”™å€¼</li>
                    </ul>
                </section>

                <section id="conclusion" class="article-section">
                    <h2>æ€»ç»“</h2>
                    <p>å°„çº¿æ£€æµ‹æ˜¯Unityæ¸¸æˆå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„æŠ€æœ¯ï¼ŒæŒæ¡å°„çº¿æ£€æµ‹çš„å„ç§æ–¹æ³•å’Œæœ€ä½³å®è·µå¯¹äºå¼€å‘é«˜è´¨é‡çš„æ¸¸æˆè‡³å…³é‡è¦ã€‚</p>
                    <p>å…³é”®è¦ç‚¹ï¼š</p>
                    <ul>
                        <li>ç†è§£ä¸åŒå°„çº¿æ£€æµ‹æ–¹æ³•çš„é€‚ç”¨åœºæ™¯</li>
                        <li>æ­£ç¡®ä½¿ç”¨å±‚çº§å’Œè·ç¦»è¿‡æ»¤</li>
                        <li>æ³¨æ„æ€§èƒ½ä¼˜åŒ–å’Œé”™è¯¯å¤„ç†</li>
                        <li>åˆç†é€‰æ‹©æ£€æµ‹æ–¹å¼ï¼ˆå°„çº¿ã€çƒå½¢ã€ç›’å½¢ç­‰ï¼‰</li>
                        <li>ç»“åˆå®é™…åº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„è§£å†³æ–¹æ¡ˆ</li>
                    </ul>

                    <div class="highlight-box">
                        <h4>ğŸ’¡ æœ€ä½³å®è·µæç¤º</h4>
                        <p>é€šè¿‡ç†Ÿç»ƒæŒæ¡å°„çº¿æ£€æµ‹æŠ€æœ¯ï¼Œä½ å°†èƒ½å¤Ÿå®ç°å„ç§å¤æ‚çš„æ¸¸æˆæœºåˆ¶å’Œäº¤äº’æ•ˆæœã€‚è®°ä½ï¼Œæ€§èƒ½ä¼˜åŒ–æ˜¯å…³é”®ï¼Œåˆç†ä½¿ç”¨å±‚çº§è¿‡æ»¤å’ŒNonAllocæ–¹æ³•å¯ä»¥æ˜¾è‘—æå‡æ¸¸æˆæ€§èƒ½ã€‚</p>
                    </div>
                </section>
            </article>

            <div class="article-navigation">
                <a href="../index.html#articles" class="nav-link">â† è¿”å›æ–‡ç« åˆ—è¡¨</a>
            </div>
        </div>

        <aside class="article-sidebar">
            <div class="toc-container">
                <h3 class="toc-title">ğŸ“‹ ç›®å½•</h3>
                <nav class="toc-list">
                    <ul>
                        <li><a href="#introduction">å¼•è¨€</a></li>
                        <li><a href="#basics">å°„çº¿æ£€æµ‹åŸºç¡€</a></li>
                        <li><a href="#methods">å°„çº¿æ£€æµ‹æ–¹æ³•è¯¦è§£</a></li>
                        <li><a href="#special-shapes">ç‰¹æ®Šå½¢çŠ¶æ£€æµ‹</a></li>
                        <li><a href="#applications">å®é™…åº”ç”¨åœºæ™¯</a></li>
                        <li><a href="#advanced">é«˜çº§å°„çº¿æ£€æµ‹æŠ€æœ¯</a></li>
                        <li><a href="#optimization">æ€§èƒ½ä¼˜åŒ–å’Œæœ€ä½³å®è·µ</a></li>
                        <li><a href="#troubleshooting">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</a></li>
                        <li><a href="#conclusion">æ€»ç»“</a></li>
                    </ul>
                </nav>
            </div>
        </aside>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Tech Blog</h3>
                    <p>åˆ†äº«æŠ€æœ¯ï¼Œä¼ æ’­çŸ¥è¯†</p>
                </div>
                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul class="footer-links">
                        <li><a href="../index.html#home">é¦–é¡µ</a></li>
                        <li><a href="../index.html#works">ä½œå“</a></li>
                        <li><a href="../index.html#articles">æ–‡ç« </a></li>
                        <li><a href="../index.html#about">å…³äº</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>æŠ€æœ¯æ ˆ</h4>
                    <ul class="footer-links">
                        <li><a href="#">Unity</a></li>
                        <li><a href="#">C#</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Tech Blog. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script>
        // Smooth scrolling for TOC links
        document.querySelectorAll('.toc-list a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Highlight active section in TOC
        const sections = document.querySelectorAll('.article-section');
        const tocLinks = document.querySelectorAll('.toc-list a');

        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -70% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    tocLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${id}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>